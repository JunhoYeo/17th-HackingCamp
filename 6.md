# C++ Secure Coding Guide v2
옥찬호(Nexon Korea) 발표자님

## 취약점 - 정수

### Unsigned Integer Warp
정수형을 표현할 수 있는 범위에 한계
C/C++에서는 프로세서의 아키텍처에 따라 다름(몇 바이트라고 명시되어 있지는 않음)
반면 C#, Java의 경우 이가 정해져 있음

- unsignedInt라는 변수를 만들고 최댓값(4294967295)로 설정 후 1을 더하면 0이 됨

- 이번에는 최솟값(0)으로 설정한 뒤 1을 빼면 4294967295가 됨

이러한 취약점을 Unsigned Warp라고 함
Warp가 되는 연산자가 있고 안되는 연산자가 있음 -> Warp가 안되는 연산자를 사용하면?

### Signed Interger Overflow
Signed int의 취약점
역시 overflow가 되는 연산자가 있고 안되는 연산자가 있음

### Conversion(변환)

- 좁은 범위 -> 넓은 범위 문제 x

- 넓은 범위 -> 좁은 범위에서 값이 잘려나가는 문제가 없는지 확인해야

### Division-By-Zero
0으로 나누기

## 취약점 - 부동소수점
컴퓨터는 부동소수점으로 표현할 수 있는 범위에 한계가 있기 때문에 `epsilon()` 함수를 사용해서 한계의 오차를 이용
한계의 오차 내(일정 구간)에 들어오면 오차 허용 or 자체적인 부동소수점 자료구조를 만들어 사용(피곤)

## 부동소수점의 max값
부동소수점을 double을 float로 변환할 때 표현할 수 없어 `inf`가 될 수 있음
-> 부동소수점 변환에선 정수와 다른 개념으로 접근해야

## Domain and range errors
제곱근에 음수값을 넣어보면?
```c++
sqrt(3) //1.3
sqrt(-2)
sqnh(3)
sqnh(4000) //inf
```

## IEEE754

## 취약점 - 입출력

### User input
사용자는 악랼하다(누르라는 것만 안 누름)

### ASCII / Unicode

### Endian
Endian : 값을 저장하는 방식

- Little Endian

- Big Endian

Endian이 다른 아키텍처끼리 통신할 때는 이를 변환해 주는 작업이 필요함

### TOCTOU (Time-Of-Check, Time-Of-Use)

## 취약점 대처방안

### 여러 플랫폼 사용
플랫폼마다 동작방식 상이

### 컴파일 / 링크 플래그
일부 컴파일러는 코드 상의 취약점을 찾을 수 있는 플래그를 제공함

### 정적 분석
정적 분석 도구 활용

### 코딩 표준 준수
잘 정리된 표준 규칙을 준수하면 취약점을 사전에 막을 수 있음

### 퍼즈 / 침투 테스팅

- 퍼즈 테스트

- 침투 테스트
